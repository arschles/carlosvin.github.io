language: python

branches:
  only:
    - site

before_install:
    - sudo apt-get update && sudo apt-get --reinstall install -qq language-pack-en language-pack-es
  
install:
    - pip install -r requirements.txt 
    - git config --global user.email "carlosvin@gmail.com"
    - git config --global user.name "carlosvin"
    
script:
    - git checkout site > /dev/null
    - git clone --branch=master https://28012063f525c09496c176f1993b3f86a83eb16c@github.com/carlosvin/carlosvin.github.io.git output
    - cd output
    - git pull
    - ls -la
    - cd ..
    - nikola build
    - cd output
    - ls -la
    - git add .
    - git commit . -m "Travis build pushed to master"
    - git push origin master
    
