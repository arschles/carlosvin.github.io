<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/"><channel><title>Vin's Blog (pthread)</title><link>http://carlosvin.github.io/</link><description></description><atom:link href="http://carlosvin.github.io/categories/pthread.xml" type="application/rss+xml" rel="self"></atom:link><language>es</language><lastBuildDate>Fri, 25 Apr 2014 07:46:24 GMT</lastBuildDate><generator>Nikola &lt;http://getnikola.com/&gt;</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Mutex C++</title><link>http://carlosvin.github.io/posts/cpp-mutex.html</link><description>&lt;div&gt;&lt;p&gt;En &lt;a class="reference external" href="http://es.wikipedia.org/wiki/C%2B%2B11"&gt;C++11&lt;/a&gt; se han introducido muchas mejoras que nos ayudan a desarrollar sistemas multi-hilo. Voy a centrarme en los &lt;a class="reference external" href="http://es.wikipedia.org/wiki/Exclusi%C3%B3n_mutua_(inform%C3%A1tica)"&gt;mutex&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;En las versiones anteriores a &lt;a class="reference external" href="http://es.wikipedia.org/wiki/C%2B%2B11"&gt;C++11&lt;/a&gt; una forma de obtener un &lt;a class="reference external" href="http://es.wikipedia.org/wiki/Exclusi%C3%B3n_mutua_(inform%C3%A1tica)"&gt;mutex&lt;/a&gt; es el que nos proporciona la librería &lt;a class="reference external" href="http://en.wikipedia.org/wiki/POSIX_Threads"&gt;pthread&lt;/a&gt;, pero para utilizarlo debíabos inicializarlo y destruirlo en estilo &lt;a class="reference external" href="http://es.wikipedia.org/wiki/C_(lenguaje_de_programaci%C3%B3n)"&gt;C&lt;/a&gt;, en definitiva, tienes que hacer algo más que lock/unlock cada vez que trabajas con un mutex.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="http://es.wikipedia.org/wiki/C%2B%2B11"&gt;C++11&lt;/a&gt; nos proporciona una &lt;a class="reference external" href="http://es.cppreference.com/w/cpp/thread/mutex"&gt;clase mutex&lt;/a&gt;, que nos abstrae de cosas que no son lock/unclock. Os recomiendo que echéis un vistazo y veáis lo limpio que queda el código: &lt;a class="reference external" href="http://es.cppreference.com/w/cpp/thread/mutex"&gt;Clase mutex de C++11&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Si sigues trabajando con &lt;a href="http://carlosvin.github.io/posts/cpp-mutex.html#id1"&gt;&lt;span class="problematic" id="id2"&gt;`versiones de compiladores previos a `C++11`_&lt;/span&gt;&lt;/a&gt;, hace tiempo me hice un wrapper que te ayuda a abstraerte del mutex de pthread, lo dejo aquí abajo por si a alguien le resulta útil.&lt;/p&gt;
&lt;p&gt;Abajo está un &lt;a class="reference external" href="https://gist.github.com/carlosvin/11257689"&gt;Gist del Código&lt;/a&gt;, he vuelto a escribir el código de cabeza y puede ser que haya algún error, lo revisaré, pero lo importante es la idea de hacer una clase que envuelva la inicialización del mutex de pthread.&lt;/p&gt;
&lt;script src="https://gist.github.com/11257689.js"&gt;&lt;/script&gt;&lt;noscript&gt;&lt;pre class="literal-block"&gt;

#include "Mutex.h"
#include &amp;lt;exception&amp;gt;


Mutex::Mutex()
{
    if ( pthread_mutex_init(&amp;amp;_mutex, NULL) )
    {
        throw "Error: Initializing _mutex";
    }
}

Mutex::~Mutex()
{

    pthread_mutex_destroy(&amp;amp;_mutex);
}

Mutex::Mutex(const Mutex &amp;amp; obj)
{
	_mutex = obj._mutex;
}

Mutex &amp;amp; Mutex::operator=(const Mutex &amp;amp; obj)
{
	_mutex = obj._mutex;
	return *this;
}

void Mutex::lock ()
{
    pthread_mutex_lock( &amp;amp;_mutex );
}

void Mutex::unlock ()
{
    pthread_mutex_unlock( &amp;amp;_mutex );
}

void Mutex::lock ( int lock, Mutex * mtx)
{
	if (lock)
	{
		mtx-&amp;gt;lock();
	}
	else
	{
		mtx-&amp;gt;unlock();
	}
}


&lt;/pre&gt;
&lt;/noscript&gt;&lt;div class="system-messages section"&gt;
&lt;h2&gt;Docutils System Messages&lt;/h2&gt;
&lt;div class="system-message" id="id1"&gt;
&lt;p class="system-message-title"&gt;System Message: ERROR/3 (&lt;tt class="docutils"&gt;&amp;lt;string&amp;gt;&lt;/tt&gt;, line 7); &lt;em&gt;&lt;a href="http://carlosvin.github.io/posts/cpp-mutex.html#id2"&gt;backlink&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
Unknown target name: "versiones de compiladores previos a `c++11".&lt;/div&gt;
&lt;/div&gt;&lt;/div&gt;</description><category>C++</category><category>pthread</category><guid>http://carlosvin.github.io/posts/cpp-mutex.html</guid><pubDate>Thu, 24 Apr 2014 15:50:00 GMT</pubDate></item></channel></rss>